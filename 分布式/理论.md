# 分布式Dubbo+Zookeeper

## 1. 什么是分布式系统?

在《分布式系统原理与范型》一书中有如下定义:"分布式系统是若干独立计算机的**集合**,这些计算机对于用户来说就像**单个**相关系统";

![image-20211004092459722](https://gitee.com/miawei/pic-go-img/raw/master/imgs/image-20211004092459722.png)

> 理解:这里我们用户访问百度或者淘宝,对于用户来说只有一个入口,而淘宝后台有很多服务器,对于用户来说这100个服务器还是一个整体,因为这100个服务器只要串起来就能变成一个,所以用户访问只有一个淘宝或者百度。而回到刚刚那句话：“分布式系统是若干独立计算机的集合”指这若干个服务器都是独立的，对于用户来说就像单个系统；

分布式系统是由一组通过**网络**进行通信、为了完成**共同**的任务而**协调**工作的计算机节点组成的系统,分布式系统的出现是为了用廉价的、普通的机器完成单个计算机无法完成的计算、存储任务。其目的是`利用更多的机器,处理更多的数据`!

> 理解：比如这100个服务器都是独立的它们都要给淘宝提供服务，那么它们内部都要建立起联系（要连起来不然怎么算一个整体），而建立联系的途径有两种：Http网络、[RPC](就是可以调用另外一台电脑上的东西)远程调用；这些服务器都存在一个共同的目标就是给用户提供[服务](为什么呢?因为如果不是为了共同目标那么我们放在这里将毫无意义可言)，

分布式系统是建立在网络之上的软件系统!

> 理解:没有网络是不行的!

首先要明确的是,只有当单个节点的处理能力无法满足日益增长的计算、存储任务的时候，且硬件的提升（如加内存、加磁盘、使用更多的CPU）高昂到得不偿失的时候，应用程序也不能进一步优化的时候，我们才考虑分布式系统。因为:分布式系统要解决的问题本身就是和单机系统一样的,而由于分布式系统多节点、通过网络通信的拓扑结构,会引起很多单机系统没有的问题,为了解决这些问题又会引入更多的机制、协议,带来更多的问题...

> 理解:分布式不要一开始就考虑进去,因为一台服务器如果已经足够用了,如果此时我们搭建分布式,我们去阿里云整集群,那么就有点大材小用了!就是说单机能干的我们就没必要去搞分布式。使用分布式还会引发问题,比如中间的服务器崩了怎么办...

假设我们现在这个网站有100个人同时访问,这时我们发现在我电脑上跑不起来了,怎么办?这时我们就可以考虑把单机复制几个,让别人可以去访问其他的,那这期间就可以实现一个操作就是"Nginx(负载均衡)",就是说让用户看起来还是一个电脑,但是它访问的却是不同的东西了:

![image-20211004094948180](https://gitee.com/miawei/pic-go-img/raw/master/imgs/image-20211004094948180.png)

这里Nginx就是一代理服务器,准确叫反向代理服务器,而后面的单机就叫横向扩展,就是不停的在扩展单机,如果说加载到一定的时候需求不够的情况下,才会考虑分布式! 

![image-20211004095750887](https://gitee.com/miawei/pic-go-img/raw/master/imgs/image-20211004095750887.png)

如果我们是在下单的流程中,我们就会把下订单这个模块放在第一个[单机上](这个电脑可以处理一万个订单),物流和支付模块比较缓慢我们就放多个单机上,进行拆开,那拆开怎么联系呢?通过HttpRestful风格;而我们只需要将其放在不同的电脑上进行调用就好了,比如说第一个电脑处理完订单后就会给第二个电脑发一个请求让这个电脑去处理,这样就极大提高了效率



理解:分布式系统就是多个电脑的集合也就是多个服务器,多个服务器一起完成共同的目标而进行协调处理,它们之间通过RPC或者HTTP协议进行联系起来,将一台服务器的压力变成多个人一起来做,就好比是人多力量大干事情就快了很多,那么时候用呢?我们对一台电脑服务器无法处理数据或者因为其他问题无法满足任务的时候,我们就会先考虑复制单机采用Nginx负载均衡的方式进行实现,如果还不行才会去考虑分布式系统,如果说一台服务器能干的事情就不需要第二台服务器,我们如果一台计算机能处理我们就不考虑分布式,就三个字"没必要"!因为使用分布式虽然好处很明显但是缺点也是有的,第一维护成本、资金的消耗、机制还有协议等等,其实最重要的点就是分布式系统和单击实现的目标都是一样的!

## 2. Dubbo介绍

随着互联网的发展,网站应用的规模不断扩大,常规的[垂直应用架构](1)已无法应对,分布式服务架构以及流动计算架构势在必行,急需一个治理系统确保架构有条不絮的演进.

